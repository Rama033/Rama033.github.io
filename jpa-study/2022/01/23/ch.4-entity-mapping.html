<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>[자바 ORM 표준 JPA 프로그래밍] 4장. 엔티티 매핑</title>
  <meta name="description" content="4장. 엔티티 매핑  JPA에서 지원하는 mapping annotation은 크게 4가지로 분류 가능  대표적 annotation은 아래와 같음          객체와 table mapping: @Entity, @Table      primary key mapping: @Id   ...">
  
  <meta name="author" content="Jo">
  <meta name="copyright" content="&copy; Jo 2022">
  

  <!-- External libraries -->
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/monokai-sublime.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightbox2/2.7.1/css/lightbox.css">

  <!-- Favicon and other icons (made with http://www.favicon-generator.org/) -->
  <link rel="shortcut icon" href="/assets/icons/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/assets/icons/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" sizes="57x57" href="/assets/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/assets/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/assets/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/assets/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/assets/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/assets/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/assets/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/assets/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="/assets/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/assets/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png">
  <link rel="manifest" href="/assets/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/assets/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">

  
  <!-- Facebook OGP cards -->
  <meta property="og:description" content="4장. 엔티티 매핑  JPA에서 지원하는 mapping annotation은 크게 4가지로 분류 가능  대표적 annotation은 아래와 같음          객체와 table mapping: @Entity, @Table      primary key mapping: @Id   ..." />
  <meta property="og:url" content="https://sungunjo.github.io/jpa-study/2022/01/23/ch.4-entity-mapping.html">
  <meta property="og:site_name" content="Development Stash" />
  <meta property="og:title" content="[자바 ORM 표준 JPA 프로그래밍] 4장. 엔티티 매핑" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://sungunjo.github.io/assets/instacode.png" />
  <meta property="og:image:type" content="image/png" />
  <meta property="og:image:width" content="612" />
  <meta property="og:image:height" content="605" />
  

  
  <!-- Twitter: card tags -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="[자바 ORM 표준 JPA 프로그래밍] 4장. 엔티티 매핑">
  <meta name="twitter:description" content="4장. 엔티티 매핑  JPA에서 지원하는 mapping annotation은 크게 4가지로 분류 가능  대표적 annotation은 아래와 같음          객체와 table mapping: @Entity, @Table      primary key mapping: @Id   ...">
  <meta name="twitter:image" content="https://sungunjo.github.io/assets/instacode.png">
  <meta name="twitter:url" content="https://sungunjo.github.io/jpa-study/2022/01/23/ch.4-entity-mapping.html">
  

  

  <!-- Site styles -->
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://sungunjo.github.io/jpa-study/2022/01/23/ch.4-entity-mapping.html">
	<link rel="alternate" type="application/rss+xml" title="Development Stash" href="https://sungunjo.github.io/feed.xml" />
	
	<!-- Tooltips -->
	<script type="text/javascript">
		window.tooltips = []
	</script>
</head>


  <body>

    <header class="navigation" role="banner">
  <div class="navigation-wrapper">
    <a href="/" class="logo">
      
      <img src="/assets/logo.png" alt="Development Stash">
      
    </a>
    <a href="javascript:void(0)" class="navigation-menu-button" id="js-mobile-menu">
      <i class="fa fa-bars"></i>
    </a>
    <nav role="navigation">
      <ul id="js-navigation-menu" class="navigation-menu show">
				
	
	<li class="nav-link"><a href="/about/">About</a>
	

	

	

	
	<li class="nav-link"><a href="/posts/">Posts</a>
	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	


      </ul>
    </nav>
  </div>
</header>


    <div class="page-content">
        <div class="post">

<div class="post-header-container has-cover" style="background-image: url(/assets/instacode.png);">
  <div class="scrim has-cover">
    <header class="post-header">
      <h1 class="title">[자바 ORM 표준 JPA 프로그래밍] 4장. 엔티티 매핑</h1>
      <p class="info">by <strong>Jo</strong></p>
    </header>
  </div>
</div>

<div class="wrapper">



<section class="post-meta">
  <div class="post-date">January 23, 2022</div>
  <div class="post-categories">
  in 
    
    <a href="/category/jpa-study">Jpa-study</a>
    
  
  </div>
</section>

<article class="post-content">
  <h1 id="4장-엔티티-매핑">4장. 엔티티 매핑</h1>
<ul>
  <li>JPA에서 지원하는 mapping annotation은 크게 4가지로 분류 가능</li>
  <li>대표적 annotation은 아래와 같음
    <ol>
      <li><strong>객체와 table mapping:</strong> @Entity, @Table</li>
      <li><strong>primary key mapping</strong>: @Id</li>
      <li><strong>field와 column mapping</strong>: @Column</li>
      <li><strong>relational mapping:</strong> @ManyToOne, @JoinColumn</li>
    </ol>
  </li>
  <li>mapping은 xml로도 기술 가능</li>
</ul>

<p><br />
<br />
<br /></p>

<h1 id="41-entity">4.1 @Entity</h1>
<ul>
  <li>table과 mapping할 class는 @Entity annotation 필수</li>
  <li>기본 생성자 필수</li>
  <li>final class, inner class, enum, interface 에는 사용 불가</li>
  <li>저장할 field에 final 사용 불가</li>
</ul>

<table>
  <thead>
    <tr>
      <th style="text-align: left">속성</th>
      <th style="text-align: left">기능</th>
      <th style="text-align: left">기본값</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">name</td>
      <td style="text-align: left">JPA 에서 사용할 entity 이름을 지정</td>
      <td style="text-align: left">class의 이름</td>
    </tr>
  </tbody>
</table>

<p><br />
<br />
<br /></p>

<h1 id="42-table">4.2 @Table</h1>
<ul>
  <li>entity와 mapping할 table을 지정</li>
</ul>

<table>
  <thead>
    <tr>
      <th style="text-align: left">속성</th>
      <th style="text-align: left">기능</th>
      <th style="text-align: left">기본값</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">name</td>
      <td style="text-align: left">mapping할 table 이름</td>
      <td style="text-align: left">entity 이름</td>
    </tr>
    <tr>
      <td style="text-align: left">catalog</td>
      <td style="text-align: left">catalog 기능이 있는 DB에서 catalog mapping</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">schema</td>
      <td style="text-align: left">schema 기능이 있는 DB에서 schema mapping</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">uniqueConstraints (DDL)</td>
      <td style="text-align: left">DDL 생성시 unique 제약조건 만듬. <br /> 2개 이상 복합 가능. <br /> schema 자동 생성 기능 사용하여 DDL 만들 시에만 사용됨</td>
      <td style="text-align: left"> </td>
    </tr>
  </tbody>
</table>

<p><br />
<br />
<br /></p>

<h1 id="43-다양한-mapping-사용">4.3 다양한 mapping 사용</h1>
<details>
<summary style="color:rgb(200, 50, 50)"><b>코드</b></summary>
<div>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Entity</span>                 <span class="c1">// name = Member (default)</span>
<span class="nd">@Table</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"MEMBER"</span><span class="o">)</span>   <span class="c1">// MEMBER table과 Member entity를 mapping</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Member</span><span class="o">{</span>
    <span class="nd">@Id</span>
    <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"ID"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">id</span><span class="o">;</span>

    <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"NAME"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">username</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nc">Integer</span> <span class="n">age</span><span class="o">;</span>

    <span class="c1">// enum 사용하려면 @Enumerated annotation으로 mapping</span>
    <span class="nd">@Enumerated</span><span class="o">(</span><span class="nc">EnumType</span><span class="o">.</span><span class="na">STRING</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">RoleType</span> <span class="n">roleType</span><span class="o">;</span>

    <span class="c1">// 날짜 타입은 @Temporal annotation으로 mapping</span>
    <span class="nd">@Temporal</span><span class="o">(</span><span class="nc">TemporalType</span><span class="o">.</span><span class="na">TIMESTAMP</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">Date</span> <span class="n">createdDate</span><span class="o">;</span>

    <span class="c1">// 길이제한 없는 CLOB 타입으로 저장하려면 @Lob annotation으로 mapping</span>
    <span class="nd">@Lob</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">description</span><span class="o">;</span>

    <span class="c1">// Getter, Setter</span>
    <span class="o">...</span>
<span class="o">}</span>

<span class="o">...</span>

<span class="kd">public</span> <span class="kd">enum</span> <span class="nc">RoleType</span> <span class="o">{</span>
    <span class="no">ADMIN</span><span class="o">,</span> <span class="no">USER</span>
<span class="o">}</span>

</code></pre></div>    </div>

  </div>
</details>

<h4 id="이름-mapping-strategy-변경">이름 mapping strategy 변경</h4>
<ul>
  <li>카멜 표기법(자바 entity)와 스네이크 표기법(DB column)을 @Column.name 속성 명시 없이 mapping하려면 <code class="language-plaintext highlighter-rouge">hibernate.ejb.naming_strategy</code> 속성 사용해서 이름 mapping strategy 변경하면 됨</li>
  <li>hibernate 에서는 <code class="language-plaintext highlighter-rouge">org.hibernate.cfg.ImprovedNamingStrategy</code> class를 제공</li>
  <li>다음과 같이 적용 가능
  <code class="language-plaintext highlighter-rouge">&lt;property name="hibernate.ejb.naming_strategy" value="org.hibernate.cfg.ImprovedNamingStrategy /&gt;
</code></li>
</ul>

<p>&lt;/div&gt;
&lt;/details&gt;</p>

<p><br />
<br />
<br /></p>

<h1 id="44-db-schema-자동-생성">4.4 DB schema 자동 생성</h1>
<ul>
  <li>JPA는 DB schema 자동 생성 기능 지원</li>
  <li>class의 mapping 정보를 보고 DB schema를 자동으로 생성해 줌</li>
  <li>이 기능을 사용하려면 persistence.xml에 다음과 같은 속성 추가해야 함
    <ul>
      <li><code class="language-plaintext highlighter-rouge">&lt;property name="hibernate.hbm2ddl.auto" value="create" /&gt;
</code></li>
    </ul>
  </li>
</ul>

<p>&lt;/div&gt;
&lt;/details&gt;</p>
<ul>
  <li>실제 실행되는 DDL 콘솔로 확인하려면 다음과 같은 속성 추가
    <ul>
      <li><code class="language-plaintext highlighter-rouge">&lt;property name="hibernate.show_sql" value="true" /&gt;
</code></li>
    </ul>
  </li>
</ul>

<p>&lt;/div&gt;
&lt;/details&gt;</p>

<h4 id="hibernatehbm2ddlauto">hibernate.hbm2ddl.auto</h4>
<ul>
  <li>schema 자동생성 기능 사용 안하려면 이 속성을 아예 지우거나 유효하지 않은 옵션 주면 됨 (ex. none)</li>
  <li>유효한 옵션은 다음과 같음</li>
</ul>

<table>
  <thead>
    <tr>
      <th style="text-align: left">옵션</th>
      <th style="text-align: left">설명</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">create</td>
      <td style="text-align: left">기존 table 삭제 후 생성 (DROP + CREATE)</td>
    </tr>
    <tr>
      <td style="text-align: left">create-drop</td>
      <td style="text-align: left">create 속성에 추가로 애플리케이션 종료시 생성한 DDL 제거 (DROP + CREATE + DROP)</td>
    </tr>
    <tr>
      <td style="text-align: left">update</td>
      <td style="text-align: left">DB table과 entity mapping 정보 비교하여 변경사항만 수정 (UPDATE)</td>
    </tr>
    <tr>
      <td style="text-align: left">validate</td>
      <td style="text-align: left">DB table과 entity mapping 정보를 비교해서 차이 있으면 경고 남기고 어플리케이션 실행 안함</td>
    </tr>
  </tbody>
</table>

<p><br />
<br /></p>

<h2 id="45-ddl-생성-기능">4.5 DDL 생성 기능</h2>
<ul>
  <li>DDL 자동 생성 기능 사용시 @Column, @Table annotation의 속성을 활용하여 조건들을 추가할 수 있음
    <ul>
      <li>not null, unique 제약조건, varchar 길이 등등</li>
    </ul>
  </li>
  <li><strong>!! 이러한 속성들은 자동 생성된 DDL에만 영향을 주며, 자동 생성 기능 미사용 시에는 아무런 역할도 하지 않음 !!</strong></li>
</ul>

<h4 id="not-null-length-constraint">not null, length constraint</h4>
<ul>
  <li>@Column.nullable 속성 값 false로 지정하여 자동 생성 DDL에 not null 제약조건 추가</li>
  <li>@Column.length 속성 값을 지정하여 자동 생성 DDL에 문자의 크기 지정</li>
</ul>

<details>
<summary style="color:rgb(200, 50, 50)"><b>코드</b></summary>
<div>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">...</span>
<span class="nd">@Column</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"NAME"</span><span class="o">,</span> <span class="n">nullable</span> <span class="o">=</span> <span class="kc">false</span><span class="o">,</span> <span class="n">length</span> <span class="o">=</span> <span class="mi">10</span><span class="o">)</span>
<span class="kd">private</span> <span class="nc">String</span> <span class="n">username</span><span class="o">;</span>
<span class="cm">/** 이렇게 옵션 줄 경우 다음과 같이 DDL 생성됨
  * 
  * CREATE TABLE MEMBER (
  * ...
  *     NAME VARCHAR(10) NOT NULL,
  * ...
  * )
  * 
  */</span>
<span class="o">...</span>

</code></pre></div>    </div>

  </div>
</details>

<h4 id="unique-constraint">unique constraint</h4>
<ul>
  <li>@Table.uniqueConstraints 속성에 @uniqueConstraint annotation으로 유니크 제약조건들 추가</li>
</ul>

<details>
<summary style="color:rgb(200, 50, 50)"><b>코드</b></summary>
<div>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Entity</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"Member"</span><span class="o">)</span>
<span class="nd">@Table</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"MEMBER"</span><span class="o">,</span> <span class="n">uniqueConstraints</span> <span class="o">=</span> <span class="o">{</span><span class="nd">@UniqueConstraint</span><span class="o">(</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s">"NAME_AGE_UNIQUE"</span><span class="o">,</span>
    <span class="n">columnNames</span> <span class="o">=</span> <span class="o">{</span><span class="s">"name"</span><span class="o">,</span> <span class="s">"age"</span><span class="o">}</span> 
<span class="o">)})</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Member</span> <span class="o">{</span>
<span class="o">...</span>
    <span class="nd">@Column</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"name"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">username</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nc">Integer</span> <span class="n">age</span><span class="o">;</span>
<span class="cm">/** 이렇게 옵션 줄 경우 다음과 같이 DDL 생성됨
  * 
  * ALTER TABLE MEMBER 
  *     ADD CONSTRAINT NAME_AGE_UNIQUE UNIQUE (name, age)
  * 
  */</span>
<span class="o">...</span>
<span class="o">}</span>

</code></pre></div>    </div>

  </div>
</details>

<p><br />
<br />
<br /></p>

<h1 id="46-primary-key-mapping">4.6 primary key mapping</h1>
<ul>
  <li>JPA에서 제공하는 DB primary key 생성 strategy
    <ol>
      <li><strong>IDENTITY:</strong> primary key 생성을 DB에 위임</li>
      <li><strong>SEQUENCE:</strong> DB sequence를 사용해서 할당</li>
      <li><strong>TABLE:</strong> 키 생성 table을 사용</li>
    </ol>
  </li>
  <li>오라클은 squence를 제공하지만 mysql은 X, 대신 auto_increment 제공
    <ul>
      <li>∴ SEQUNCE, IDENTITY strategy은 사용하는 DB에 의존</li>
    </ul>
  </li>
  <li>TABLE strategy은 키 생성용 table을 만들어두고 sequence 처럼 활용하는 거라 DB 의존 X</li>
  <li>primary key 자동 생성 사용하려면 @Id에 @GeneratedValue annotation 추가하고 원하는 키 생성 strategy 선택하면 됨
    <ul>
      <li>먼저 아래와 같이 persistence.xml에 키 생성 strategy 속성 추가해야 함
        <pre><code class="language-hibernate.id.new_generator_mappings=true">
</code></pre>
      </li>
    </ul>
  </li>
</ul>

<p>&lt;/div&gt;
&lt;/details&gt;</p>

<p><br />
<br /></p>

<h1 id="461-primary-key-직접-할당-strategy">4.6.1 primary key 직접 할당 strategy</h1>
<ul>
  <li>그냥 @Id annotation으로 mapping하면 됨</li>
  <li>@Id 적용 가능 자바 타입
    <ul>
      <li>자바 기본 타입</li>
      <li>자바 Wrapper 타입</li>
      <li>String</li>
      <li>java.util.Date</li>
      <li>java.sqlDate</li>
      <li>java.math.BigDecimal</li>
      <li>java.math.BigInteger</li>
    </ul>
  </li>
</ul>

<details>
<summary style="color:rgb(200, 50, 50)"><b>코드</b></summary>
<div>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Entity</span>
<span class="nd">@Table</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"member"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Member</span> <span class="o">{</span>
<span class="nd">@Id</span>
<span class="kd">private</span> <span class="nc">String</span> <span class="n">id</span><span class="o">;</span>
<span class="o">...</span>
<span class="o">}</span>

<span class="o">...</span>

<span class="nc">Member</span> <span class="n">member</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Member</span><span class="o">();</span>

<span class="c1">// entity 저장 전에 직접 키 할당</span>
<span class="n">member</span><span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="s">"id1"</span><span class="o">);</span>
<span class="n">em</span><span class="o">.</span><span class="na">persist</span><span class="o">(</span><span class="n">member</span><span class="o">);</span>

</code></pre></div>    </div>

  </div>
</details>

<p><br />
<br /></p>

<h2 id="462-identity-strategy">4.6.2 IDENTITY strategy</h2>
<ul>
  <li>primary key 생성을 DB에 위임</li>
  <li>MySQL, PostgreSQL, SQL Server, DB2 에서 주로 사용</li>
  <li>IDENTITY strategy은 mySQL AUTO_INCREMENT 처럼 DB 값 저장 후에야 primary key 구할 수 있을 때 사용</li>
  <li><code class="language-plaintext highlighter-rouge">@GeneratedValue(strategy = GenrationType.IDENTITY)</code> annotation 추가하면 DB 추가로 조회해서 primary key값 얻어옴
    <ul>
      <li><code class="language-plaintext highlighter-rouge">em.persit()</code> 호출해서 entity 저장하는 시점에 DB가 생성한 값을 JPA 가 추가적으로 조회함 (별도 쿼리)</li>
    </ul>
  </li>
</ul>

<details>
<summary style="color:rgb(200, 50, 50)"><b>코드</b></summary>
<div>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// code</span>
<span class="nd">@Entity</span>
<span class="nd">@Table</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"MEMBER"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Member</span> <span class="o">{</span>
    <span class="nd">@Id</span>
    <span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span> <span class="o">=</span> <span class="nc">GenrationType</span><span class="o">.</span><span class="na">IDENTITY</span><span class="o">)</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">id</span><span class="o">;</span>
    <span class="nd">@Column</span><span class="o">(</span><span class="n">length</span> <span class="o">=</span> <span class="mi">64</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
<span class="o">...</span>
<span class="o">}</span>

</code></pre></div>    </div>

  </div>
</details>

<details>
<summary style="color:rgb(200, 50, 50)"><b>sql</b></summary>
<div>

    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">#</span> <span class="k">sql</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">MEMBER</span> <span class="p">(</span>
    <span class="n">ID</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="n">AUTO_INCREMENT</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
    <span class="n">NAME</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">64</span><span class="p">)</span> 
<span class="p">...</span>
<span class="p">);</span>

<span class="p">...</span>
<span class="o">#</span> <span class="n">ID</span> <span class="k">column</span> <span class="err">비워두면</span> <span class="n">DB</span><span class="err">가</span> <span class="err">순서대로</span> <span class="err">값</span> <span class="err">만들어서</span> <span class="err">넣어줌</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">MEMBER</span><span class="p">(</span><span class="n">NAME</span><span class="p">)</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'Alice'</span><span class="p">);</span>   <span class="o">//</span> <span class="n">ID</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">MEMBER</span><span class="p">(</span><span class="n">NAME</span><span class="p">)</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'Bob'</span><span class="p">);</span>     <span class="o">//</span> <span class="n">ID</span> <span class="o">=</span> <span class="mi">2</span>

</code></pre></div>    </div>

  </div>
</details>

<blockquote>
  <p><strong>IDENTITY strategy과 최적화</strong> <br />
JDBC3에 추가된 ```Statement.getGeneratedKeys() 를 사용하면 추가 조회 없이 데이터 저장과 동시에 생성된 primary key값 조회 가능</p>
</blockquote>

<blockquote>
  <p><strong>IDENTITY strategy 사용시 쓰기 지연</strong> <br />
IDENTITY 사용시 entity를 DB에 저장해야 identifier 구할 수 있기 때문에 <code class="language-plaintext highlighter-rouge">em.persist()</code> 호출하면 쓰기 지연 없이 바로 INSERT 쿼리 전송됨 <br /></p>
</blockquote>

<p><br />
<br /></p>

<h2 id="463-sequence-strategy">4.6.3 SEQUENCE strategy</h2>
<ul>
  <li>DB sequnce는 유니크한 값을 순차로 생성하는 특별한 DB object</li>
  <li>SEQUENCE strategy은 DB sequence 사용해서 primary key 생성</li>
  <li>오라클, PostgreSQL, DB2, H2 에서 사용 가능</li>
  <li>SEQUENCE strategy을 사용하려면 먼저 DB에서 sequence 생성해줘야 함 (DDL 자동생성 기능 사용해도 됨)</li>
  <li>SEQUENCE 사용하면 <code class="language-plaintext highlighter-rouge">em.persist()</code> 호출시 DB sequence 사용해서 identifier 조회 후 entity에 할당 (flush 전까지 DB 저장 X)
    <ul>
      <li>∴ IDENTITY와 달리 쓰기 지연 가능</li>
    </ul>
  </li>
</ul>

<details>
<summary style="color:rgb(200, 50, 50)"><b>sql</b></summary>
<div>

    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">#</span> <span class="k">sql</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">MEMBER</span> <span class="p">(</span>
    <span class="n">ID</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
    <span class="n">NAME</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">64</span><span class="p">)</span>
<span class="p">)</span>

<span class="o">#</span> <span class="n">sequence</span> <span class="err">생성</span>
<span class="k">CREATE</span> <span class="n">SEQUENCE</span> <span class="n">BOARD_SEQ</span> <span class="k">START</span> <span class="k">WITH</span> <span class="mi">1</span> <span class="k">INCREMENT</span> <span class="k">BY</span> <span class="mi">1</span><span class="p">;</span>

</code></pre></div>    </div>

  </div>
</details>

<details>
<summary style="color:rgb(200, 50, 50)"><b>코드</b></summary>
<div>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// code</span>

<span class="c1">// entity에 sequence mapping</span>
<span class="nd">@Entity</span>
<span class="nd">@SequenceGenerator</span><span class="o">(</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s">"BOARD_SEQ_GENERATOR"</span>    <span class="c1">// SequenceGenerator 이름</span>
    <span class="n">sequenceName</span> <span class="o">=</span> <span class="s">"BAORD_SEQ"</span><span class="o">,</span>     <span class="c1">// mapping할 DB sequence 이름</span>
    <span class="n">initalValue</span> <span class="o">=</span> <span class="mi">1</span><span class="o">,</span> <span class="n">allocationSize</span> <span class="o">=</span> <span class="mi">1</span>
<span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Board</span> <span class="o">{</span>
    <span class="nd">@Id</span>
    <span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span> <span class="o">=</span> <span class="nc">GenerationType</span><span class="o">.</span><span class="na">SEQUENCE</span><span class="o">,</span>
                    <span class="n">generator</span> <span class="o">=</span> <span class="s">"BOARD_SEQ_GENERATOR"</span><span class="o">)</span>  <span class="c1">// SequenceGenerator mapping</span>
    <span class="c1">// @SequenceGenrator(...)                           // @SequenceGenerator는 여기에다 붙여도 됨</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">id</span><span class="o">;</span>
<span class="o">}</span>

</code></pre></div>    </div>

  </div>
</details>

<p><br /></p>

<h3 id="sequencegenerator">@SequenceGenerator</h3>

<table>
  <thead>
    <tr>
      <th style="text-align: left">속성</th>
      <th style="text-align: left">기능</th>
      <th style="text-align: left">기본값</th>
      <th style="text-align: left">비고</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">name</td>
      <td style="text-align: left">identifier 생성기 이름</td>
      <td style="text-align: left">필수값</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">sequenceName</td>
      <td style="text-align: left">DB에 등록되어 있는 sequence 이름</td>
      <td style="text-align: left">hibernate_sequence</td>
      <td style="text-align: left">sequenceName 기본값은 구현체별로 다름</td>
    </tr>
    <tr>
      <td style="text-align: left">initalValue</td>
      <td style="text-align: left">DDL 생성시에만 사용됨. sequence DDL 생성할 때 처음 시작하는 수 지정</td>
      <td style="text-align: left">1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">allocationSize</td>
      <td style="text-align: left">sequence 한번 호출에 증가하는 수</td>
      <td style="text-align: left">50</td>
      <td style="text-align: left">성능 최적화에 사용. 반드시 DB sequnce allocationSize에 설정된 값과 똑같이 설정해줘야 함</td>
    </tr>
    <tr>
      <td style="text-align: left">catalog</td>
      <td style="text-align: left">DB catalog 이름</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">schema</td>
      <td style="text-align: left">DB schema 이름</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
  </tbody>
</table>

<ul>
  <li>mapping되는 DDL은 다음과 같음</li>
</ul>

<details>
<summary style="color:rgb(200, 50, 50)"><b>sql</b></summary>
<div>

    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">CREATE</span> <span class="n">SEQUENCE</span> <span class="p">[</span><span class="n">sequenceName</span><span class="p">]</span>
    <span class="k">START</span> <span class="k">WITH</span> <span class="p">[</span><span class="n">initialValue</span><span class="p">]</span> <span class="k">INCREMENT</span> <span class="k">BY</span> <span class="p">[</span><span class="n">allocationSize</span><span class="p">]</span>
    
</code></pre></div>    </div>

  </div>
</details>

<blockquote>
  <p><strong>SEQUENCE strategy과 최적화</strong> <br />
SEQUENCE strategy 사용시 DB sequence 에서 할당해줄 identifier을 조회해야 하기 때문에 DB와 2번 통신함 <br /></p>
  <ol>
    <li>identifier 구하려고 DB sequence 조회 <br />
  <code class="language-plaintext highlighter-rouge">SELECT BOARD_SEQ.NEXTVAL FROM DUAL</code> <br /></li>
    <li>flush 할 때 조회한 sequence를 primary key 값으로 entity를 DB에 저장 <br />
  <code class="language-plaintext highlighter-rouge">INSERT INTO BOARD...</code> <br />
따라서 sequence 접근 횟수를 줄이기 위해 @SequenceGenerator.allocationSize 속성 사용 <br />
<br />
<code class="language-plaintext highlighter-rouge">hibernate.id.new_generator_mappings=true</code> 일 경우 <br />
allocationSize 값 만큼 한번에 DB sequence 증가시키고 그만큼 메모리에 sequence 값 할당해서 사용 <br />
다 쓰면 다시 DB sequence 조회하고 메모리 할당 반복 <br />
<br />
<code class="language-plaintext highlighter-rouge">hibernate.id.new_generator_mappings=false</code> 일 경우 <br />
DB sequence는 하나씩 증가시키고 대신 애플리케이션에서는 allocationSize 크기만큼 사용 <br />
ex) allocationSize=50인 경우에 반환된 sequence 값이 1이면 1~50 사용, 2이면 51~100 사용하는 방식 <br /></li>
  </ol>
</blockquote>

<p><br />
<br /></p>

<h2 id="464-table-strategy">4.6.4 TABLE strategy</h2>
<ul>
  <li>키 생성 전용 table을 하나 만들어 DB sequence 를 흉내내는 strategy</li>
  <li>table을 사용하기 때문에 모든 DB에 사용 가능</li>
  <li>먼저 키 생성 용도 table 만들어야 함 (DDL 자동생성 기능 사용해도 됨)
    <ul>
      <li>table에 값 없으면 JPA가 알아서 초기화 하기 때문에 미리 넣어둘 필요 X</li>
    </ul>
  </li>
  <li>DB sequence 대신 table 사용한다는 점 빼면 내부 동작 방식은 SEQUENCE strategy과 동일</li>
</ul>

<details>
<summary style="color:rgb(200, 50, 50)"><b>sql</b></summary>
<div>

    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">#</span> <span class="k">sql</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">MY_SEQUENCES</span> <span class="p">(</span>
    <span class="n">sequence_name</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>    <span class="o">//</span> <span class="n">sequence</span> <span class="err">이름</span>
    <span class="n">next_Val</span> <span class="nb">bigint</span><span class="p">,</span>                        <span class="o">//</span> <span class="n">sequence</span> <span class="err">값</span>
    <span class="k">primary</span> <span class="k">key</span> <span class="p">(</span> <span class="n">sequence_name</span> <span class="p">)</span>
<span class="p">)</span>

</code></pre></div>    </div>

  </div>
</details>

<details>
<summary style="color:rgb(200, 50, 50)"><b>코드</b></summary>
<div>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// code</span>
<span class="nd">@Entity</span>
<span class="nd">@TableGenerator</span><span class="o">(</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s">"BOARD_SEQ_GENERATOR"</span>
    <span class="n">table</span> <span class="o">=</span> <span class="s">"MY_SEQUENCES"</span><span class="o">,</span>
    <span class="n">pkColumnValue</span> <span class="o">=</span> <span class="s">"BOARD_SEQ"</span><span class="o">,</span> <span class="n">allocationSize</span> <span class="o">=</span> <span class="mi">1</span><span class="o">)</span>
<span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Board</span> <span class="o">{</span>
    <span class="nd">@Id</span>
    <span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span> <span class="o">=</span> <span class="nc">GenerationType</span><span class="o">.</span><span class="na">TABLE</span><span class="o">,</span>
                    <span class="n">generator</span> <span class="o">=</span> <span class="s">"BOARD_SEQ_GENERATOR"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">id</span><span class="o">;</span>
<span class="o">}</span>

</code></pre></div>    </div>

  </div>
</details>

<p><br /></p>

<h3 id="tablegenerator">@TableGenerator</h3>

<table>
  <thead>
    <tr>
      <th style="text-align: left">속성</th>
      <th style="text-align: left">기능</th>
      <th style="text-align: left">기본값</th>
      <th style="text-align: left">비고</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">name</td>
      <td style="text-align: left">identifier 생성기 이름</td>
      <td style="text-align: left">필수값</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">table</td>
      <td style="text-align: left">키생성 table명</td>
      <td style="text-align: left">hibernate_sequences</td>
      <td style="text-align: left">하이버네이트 기준</td>
    </tr>
    <tr>
      <td style="text-align: left">pkColumnName</td>
      <td style="text-align: left">sequence column명</td>
      <td style="text-align: left">sequence_name</td>
      <td style="text-align: left">하이버네이트 기준</td>
    </tr>
    <tr>
      <td style="text-align: left">valueColumnName</td>
      <td style="text-align: left">sequence 값 column명</td>
      <td style="text-align: left">next_val</td>
      <td style="text-align: left">하이버네이트 기준</td>
    </tr>
    <tr>
      <td style="text-align: left">pkColumnValue</td>
      <td style="text-align: left">키로 사용할 값 이름</td>
      <td style="text-align: left">entity 이름</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">initalValue</td>
      <td style="text-align: left">초기 값. 마지막 생성된 값이 기준</td>
      <td style="text-align: left">0</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">allocationSize</td>
      <td style="text-align: left">sequence 한번 호출에 증가하는 수</td>
      <td style="text-align: left">50</td>
      <td style="text-align: left">성능 최적화에 사용</td>
    </tr>
    <tr>
      <td style="text-align: left">schema</td>
      <td style="text-align: left">DB schema 이름</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">uniqueConstratins</td>
      <td style="text-align: left">유니크 제약조건 지정</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">DDL</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p><strong>TABLE strategy과 최적화</strong> <br />
최적화 하기 위해서는 SEQUENCE 와 마찬가지로 @TableGenerator.allocationSize 를 사용 <br />
다만 TABLE strategy은 SELECT 쿼리로 sequence 값 조회 후 sequence 증가시키기 위해 UPDATE 쿼리를 사용해서 최적화 해도 SEQUENCE strategy보다 한 번 더 DB 와 통신하게 됨</p>
</blockquote>

<p><br />
<br /></p>

<h2 id="465-auto-strategy">4.6.5 AUTO strategy</h2>
<ul>
  <li>선택한 DB에 따라 IDENTITY, SEQUENCE, TABLE strategy 중 하나를 자동으로 선택
    <ul>
      <li>ex. 오라클: SEQUENCE, MySQL: IDENTITY</li>
    </ul>
  </li>
  <li>AUTO에 의해 SEQUENCE, TABLE strategy 선택될 경우 sequence 혹은 키 생성용 table을 미리 만들어 두어야 함
    <ul>
      <li>아니면 schema 자동 생성 기능 써서 기본값으로 자동 생성되도록 하면 됨</li>
    </ul>
  </li>
</ul>

<p><br />
<br /></p>

<h2 id="466-primary-key-mapping-정리">4.6.6 primary key mapping 정리</h2>
<ul>
  <li>persistence context는 identifier으로 entity 구분</li>
  <li>∴ entity를 persist 상태로 만들려면 identifier 필수</li>
  <li><code class="language-plaintext highlighter-rouge">em.persist()</code> 호출 직후 primary key mapping strategy 별로 아래와 같이 진행됨
    <ul>
      <li>직접 할당: <code class="language-plaintext highlighter-rouge">em.persist()</code> 호출 전에 identifier 할당 해놔야 함</li>
      <li><strong>IDENTITY:</strong> DB에 entity 먼저 저장해서 identifier 획득 후 persistence context에 저장</li>
      <li><strong>SEQUENCE:</strong> DB sequence에서 identifier 획득 후 persistence context에 저장</li>
      <li><strong>TABLE:</strong> DB sequence 생성용 table에서 identifier 획득 후 persistence context에 저장</li>
    </ul>
  </li>
</ul>

</article>



<section class="tags">
  <strong>Tags:</strong> <a href="/tag/jpa">jpa</a>,&nbsp;<a href="/tag/entity">entity</a>,&nbsp;<a href="/tag/mapping">mapping</a>,&nbsp;<a href="/tag/entity-mapping">entity-mapping</a>,&nbsp;<a href="/tag/table">table</a>,&nbsp;<a href="/tag/annotation">annotation</a>,&nbsp;<a href="/tag/schema">schema</a>,&nbsp;<a href="/tag/database">database</a>,&nbsp;<a href="/tag/ddl">ddl</a>,&nbsp;<a href="/tag/reference">reference</a>,&nbsp;<a href="/tag/field">field</a>,&nbsp;<a href="/tag/column">column</a>
</section>



<section class="rss">
  <p class="rss-subscribe text"><strong>Subscribe <a href="/feed.xml">via RSS</a></strong></p>
</section>

<section class="share">
  <span>Share: </span>
  
    
    
      <a href="//twitter.com/share?text=%5B%EC%9E%90%EB%B0%94+ORM+%ED%91%9C%EC%A4%80+JPA+%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D%5D+4%EC%9E%A5.+%EC%97%94%ED%8B%B0%ED%8B%B0+%EB%A7%A4%ED%95%91&url=https%3A%2F%2Fsungunjo.github.io%2Fjpa-study%2F2022%2F01%2F23%2Fch.4-entity-mapping.html&via="
        onclick="window.open(this.href, 'twitter-share', 'width=550,height=255');return false;">
        <i class="fa fa-twitter-square fa-lg"></i>
      </a>
    
    
    
    
    
    
    
  
    
    
    
      <a href="//www.facebook.com/sharer.php?t=%5B%EC%9E%90%EB%B0%94+ORM+%ED%91%9C%EC%A4%80+JPA+%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D%5D+4%EC%9E%A5.+%EC%97%94%ED%8B%B0%ED%8B%B0+%EB%A7%A4%ED%95%91&u=https%3A%2F%2Fsungunjo.github.io%2Fjpa-study%2F2022%2F01%2F23%2Fch.4-entity-mapping.html"
        onclick="window.open(this.href, 'facebook-share', 'width=550,height=255');return false;">
        <i class="fa fa-facebook-square fa-lg"></i>
      </a>
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
      <a href="//www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fsungunjo.github.io%2Fjpa-study%2F2022%2F01%2F23%2Fch.4-entity-mapping.html"
        onclick="window.open(this.href, 'linkedin-share', 'width=550,height=255');return false;">
        <i class="fa fa-linkedin-square fa-lg"></i>
      </a>
    
    
    
    
  
    
    
    
    
      <a href="//plus.google.com/share?title=%5B%EC%9E%90%EB%B0%94+ORM+%ED%91%9C%EC%A4%80+JPA+%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D%5D+4%EC%9E%A5.+%EC%97%94%ED%8B%B0%ED%8B%B0+%EB%A7%A4%ED%95%91&url=https%3A%2F%2Fsungunjo.github.io%2Fjpa-study%2F2022%2F01%2F23%2Fch.4-entity-mapping.html"
        onclick="window.open(this.href, 'google-plus-share', 'width=550,height=255');return false;">
        <i class="fa fa-google-plus-square fa-lg"></i>
      </a>
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
      <a href="//www.pinterest.com/pin/create/button/?description=%5B%EC%9E%90%EB%B0%94+ORM+%ED%91%9C%EC%A4%80+JPA+%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D%5D+4%EC%9E%A5.+%EC%97%94%ED%8B%B0%ED%8B%B0+%EB%A7%A4%ED%95%91&url=https%3A%2F%2Fsungunjo.github.io%2Fjpa-study%2F2022%2F01%2F23%2Fch.4-entity-mapping.html&media=https://sungunjo.github.io/assets/instacode.png"
        onclick="window.open(this.href, 'pinterest-share', 'width=550,height=255');return false;">
        <i class="fa fa-pinterest-square fa-lg"></i>
      </a>
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
      <a href="//www.reddit.com/submit" onclick="window.location = '//www.reddit.com/submit?url=' + encodeURIComponent('https://sungunjo.github.io/jpa-study/2022/01/23/ch.4-entity-mapping.html') + '&title=[자바 ORM 표준 JPA 프로그래밍] 4장. 엔티티 매핑'; return false">
        <i class="fa fa-reddit-square fa-lg"></i>
      </a>
    
    
  
    
    
    
    
    
    
    
    
  
</section>




<section class="disqus">
  <div id="disqus_thread"></div>
  <script type="text/javascript">
    var disqus_shortname = 'sungunjo-github-io';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>



</div>
</div>

    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h3 class="footer-heading">Development Stash</h3>

    <div class="site-navigation">

      <p><strong>Site Map</strong></p>
      <ul class="pages">
				
	
	<li class="nav-link"><a href="/about/">About</a>
	

	

	

	
	<li class="nav-link"><a href="/posts/">Posts</a>
	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	


      </ul>
    </div>

    <div class="site-contact">

      <p><strong>Contact</strong></p>
      <ul class="social-media-list">
        <li>
          <a href="mailto:sungunjo.dev@gmail.com">
            <i class="fa fa-envelope-o"></i>
            <span class="username">sungunjo.dev@gmail.com</span>
          </a>
        </li>

        
          
        
          
        
          
          <li>
            <a href="https://github.com/sungunjo" title="Fork me on GitHub">
              <i class="fa fa-github"></i>
              <span class="username">sungunjo</span>
            </a>
          </li>
          
        
          
          <li>
            <a href="https://www.linkedin.com/in/sungunjo" title="Connect with me on LinkedIn">
              <i class="fa fa-linkedin"></i>
              <span class="username">SungUn Jo</span>
            </a>
          </li>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        

      </ul>
    </div>

    <div class="site-signature">
      <p class="rss-subscribe text"><strong>Subscribe <a href="/feed.xml">via RSS</a></strong></p>
      <p class="text">개발 공부 블로그</p>
    </div>

  </div>

</footer>

<!-- Scripts -->
<script src="//code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.1/js/lightbox.min.js"></script>
<script src="//unpkg.com/popper.js@1"></script>
<script src="//unpkg.com/tippy.js@5"></script>

<script type="text/javascript">
$(document).ready(function() {
  // Default syntax highlighting
  hljs.initHighlightingOnLoad();

  // Header
  var menuToggle = $('#js-mobile-menu').unbind();
  $('#js-navigation-menu').removeClass("show");
  menuToggle.on('click', function(e) {
    e.preventDefault();
    $('#js-navigation-menu').slideToggle(function(){
      if($('#js-navigation-menu').is(':hidden')) {
        $('#js-navigation-menu').removeAttr('style');
      }
    });
  });

	// Enable tooltips via Tippy.js
	if (Array.isArray(window.tooltips)) {
		window.tooltips.forEach(function(tooltip) {
			var selector = tooltip[0];
			var config = tooltip[1];
			tippy(selector, config);
		})
	}
});

</script>




<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-156645046-1', 'auto');
  ga('send', 'pageview', {
    'page': '/jpa-study/2022/01/23/ch.4-entity-mapping.html',
    'title': '[자바 ORM 표준 JPA 프로그래밍] 4장. 엔티티 매핑'
  });
</script>



  </body>

</html>
